<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AppMovile.Views.MainPage"
             BackgroundColor="White">

    <VerticalStackLayout Spacing="15">

        <!-- HEADER -->
        <Grid BackgroundColor="#E07A5F" Padding="10" HeightRequest="60">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Label Text="Nom App"
                   VerticalOptions="Center"
                   TextColor="White"
                   FontSize="20"
                   FontAttributes="Bold" />

            <ImageButton x:Name="AddButton"
                 Grid.Column="1"
                 Source="add_icon.png"
                 HeightRequest="30"
                 WidthRequest="30"
                 BackgroundColor="Transparent"
                 HorizontalOptions="End"
                 IsVisible="False"
                 Clicked="OnAddButtonClicked"/>

            <ImageButton Grid.Column="2"
                         Source="user.png"
                         HeightRequest="30"
                         WidthRequest="30"
                         BackgroundColor="Transparent"
                         HorizontalOptions="Start"
                         Margin="10,0,0,0" 
                         Clicked="OnUserButtonClicked"/>
        </Grid>

        <!-- USER GREETING -->
        <Label x:Name="WelcomeLabel"
               FontSize="18"
               FontAttributes="Bold"
               TextColor="Black"
               Margin="20,10,0,0" />

        <!-- CATEGORY FILTER -->
        <ScrollView Orientation="Horizontal" Margin="10,0,0,0">
            <HorizontalStackLayout x:Name="CategoryStackLayout"
                                   BindableLayout.ItemsSource="{Binding Categories}"
                                   Spacing="10">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <Button Text="{Binding}"
                                BackgroundColor="#E5E5E5"
                                TextColor="Black"
                                CornerRadius="15"
                                Clicked="OnCategoryClicked"/>
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </HorizontalStackLayout>
        </ScrollView>

        <!-- CARDS LIST -->
        <ScrollView>
            <VerticalStackLayout x:Name="CardsContainer"
                                 Padding="10" Spacing="10">
                <!-- Cards will be loaded dynamically -->
            </VerticalStackLayout>
        </ScrollView>

    </VerticalStackLayout>
</ContentPage>
